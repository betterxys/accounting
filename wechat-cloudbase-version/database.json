{
  "collections": [
    {
      "name": "monthlyRecords",
      "description": "月度记账记录",
      "indexes": [
        {
          "keys": [{"userId": 1}, {"year": -1}, {"month": -1}],
          "name": "user_date_index"
        },
        {
          "keys": [{"userId": 1}, {"id": 1}],
          "name": "user_record_id_index"
        }
      ],
      "schema": {
        "id": "string",
        "userId": "string",
        "year": "number",
        "month": "number", 
        "recordDate": "string",
        "balances": {
          "xiaoxiao": "object",
          "yunyun": "object"
        },
        "totals": {
          "xiaoxiao": "number",
          "yunyun": "number", 
          "combined": "number"
        },
        "changes": {
          "xiaoxiao": "number",
          "yunyun": "number",
          "combined": "number"
        },
        "createdAt": "date",
        "updatedAt": "date"
      }
    },
    {
      "name": "accountTypes", 
      "description": "用户自定义账户类型",
      "indexes": [
        {
          "keys": [{"userId": 1}],
          "name": "user_index"
        }
      ],
      "schema": {
        "userId": "string",
        "types": "array",
        "createdAt": "date",
        "updatedAt": "date"
      }
    }
  ],
  "permissions": {
    "monthlyRecords": {
      "read": "auth.uid != null && resource.data.userId == auth.uid",
      "write": "auth.uid != null && resource.data.userId == auth.uid",
      "create": "auth.uid != null && request.data.userId == auth.uid"
    },
    "accountTypes": {
      "read": "auth.uid != null && resource.data.userId == auth.uid", 
      "write": "auth.uid != null && resource.data.userId == auth.uid",
      "create": "auth.uid != null && request.data.userId == auth.uid"
    }
  }
}