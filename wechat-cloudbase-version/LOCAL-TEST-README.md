# 🧪 云开发版本本地测试指南

## 🚀 快速启动测试

```bash
cd wechat-cloudbase-version
./local-test.sh
```

然后访问：`http://localhost:3003`

## 🔍 测试检查清单

### 1. **基础功能测试**
- [ ] 页面正常加载，无报错
- [ ] 显示"💾 本地存储模式"状态（右上角）
- [ ] 标签页切换正常（概览、记账、分析、设置）
- [ ] 界面与正式版本完全一致

### 2. **记账功能测试**
- [ ] 点击"📝 记账"按钮跳转到记账页面
- [ ] 日期选择器工作正常
- [ ] 可以输入各账户余额
- [ ] 实时计算总计金额
- [ ] 保存记录成功并显示成功提示

### 3. **数据展示测试**
- [ ] 概览页面显示最新资产数据
- [ ] 资产变化指示（增长/减少箭头）
- [ ] 趋势图表正常显示
- [ ] 最近记录列表显示

### 4. **分析页面测试**
- [ ] 切换到分析页面
- [ ] 时间范围选择器工作
- [ ] 四个图表正常显示（如有数据）

### 5. **设置功能测试**
- [ ] 账户类型管理正常
- [ ] 可以添加新账户类型
- [ ] 数据导出功能工作
- [ ] 数据导入功能工作
- [ ] 系统信息显示"本地存储"

### 6. **数据持久化测试**
- [ ] 刷新页面后数据仍然存在
- [ ] 浏览器开发者工具中可看到localStorage数据
- [ ] 记录编辑和删除功能正常

## 🔧 开发者调试

### 查看控制台日志
按F12打开开发者工具，查看Console：

```javascript
// 应该看到这些日志
"⚠️ 云开发不可用，使用本地存储模式"
"✅ 从本地加载数据成功"

// 查看当前数据
console.log(tracker.data);

// 查看云开发状态
console.log('云开发启用:', tracker.isCloudEnabled);
console.log('当前用户:', tracker.currentUser);
```

### 查看本地存储
在开发者工具的Application/Storage标签页：
- localStorage中应该有`coupleAssetTracker`键
- 包含完整的记录和设置数据

### 测试云开发降级逻辑
```javascript
// 模拟云开发不可用的情况
tracker.isCloudEnabled = false;
tracker.updateSyncStatus('💾 本地存储模式');
```

## 🆚 与其他版本对比

### vs 正式版本
- ✅ 界面完全相同
- ✅ 功能完全相同
- ✅ 数据格式兼容
- ➕ 增加了云开发支持（本地测试时不可用）

### vs 调试版本
- ❌ 无调试标识和日志
- ❌ 无测试数据快速加载
- ✅ 生产环境代码
- ➕ 云开发集成

## 🐛 常见问题排查

### Q1: 页面报错"cloudbase is not defined"
**A**: 正常现象！本地环境没有云开发SDK，代码会自动降级到本地存储模式。

### Q2: 同步状态显示"连接中..."
**A**: 刷新页面，应该会变成"💾 本地存储模式"。

### Q3: 数据没有保存
**A**: 检查：
1. 浏览器控制台是否有报错
2. localStorage是否有数据
3. 是否输入了有效的金额

### Q4: 图表不显示
**A**: 
1. 确保已有记录数据
2. 检查Chart.js是否正确加载
3. 查看控制台是否有报错

## ✅ 测试通过标准

**所有测试项都勾选完成 = 云开发版本在本地环境下完全正常！**

这意味着：
- 代码逻辑正确
- 降级机制有效
- 用户体验一致
- 可以安全部署到微信云开发环境

## 🚀 下一步：云开发环境测试

本地测试通过后，就可以：
1. 上传文件到微信云开发静态网站托管
2. 配置云数据库和权限
3. 测试云端登录和数据同步功能