# ğŸŒ¥ï¸ å¾®ä¿¡äº‘å¼€å‘ç‰ˆæœ¬éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç‰ˆæœ¬ç‰¹ç‚¹
- âœ… æ•°æ®å­˜å‚¨åœ¨å¾®ä¿¡äº‘æ•°æ®åº“
- âœ… æ”¯æŒå¾®ä¿¡ç™»å½•
- âœ… è‡ªåŠ¨äº‘ç«¯åŒæ­¥
- âœ… å¤šè®¾å¤‡æ•°æ®å…±äº«
- âœ… æœ¬åœ°+äº‘ç«¯åŒé‡å¤‡ä»½

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. å‡†å¤‡å·¥ä½œ
1. **æ³¨å†Œå¾®ä¿¡å°ç¨‹åºè´¦å·**
   - è®¿é—® https://mp.weixin.qq.com/
   - æ³¨å†Œå°ç¨‹åºå¼€å‘è€…è´¦å·

2. **å¼€é€šäº‘å¼€å‘**
   - åœ¨å°ç¨‹åºåå°å¼€é€šäº‘å¼€å‘æœåŠ¡
   - è®°å½•äº‘å¼€å‘ç¯å¢ƒIDï¼š`cloud1-3g8s3xvm7609c639`

### 2. é…ç½®äº‘æ•°æ®åº“

1. **åˆ›å»ºæ•°æ®é›†åˆ**
   åœ¨äº‘å¼€å‘æ§åˆ¶å° > æ•°æ®åº“ä¸­åˆ›å»ºä»¥ä¸‹é›†åˆï¼š

   ```javascript
   // é›†åˆåï¼šmonthlyRecords
   // ç”¨é€”ï¼šå­˜å‚¨æœˆåº¦è®°è´¦è®°å½•
   
   // é›†åˆåï¼šaccountTypes  
   // ç”¨é€”ï¼šå­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰è´¦æˆ·ç±»å‹
   ```

2. **è®¾ç½®æ•°æ®åº“æƒé™**
   ```javascript
   // monthlyRecords æƒé™è®¾ç½®
   {
     "read": "auth.uid != null && resource.data.userId == auth.uid",
     "write": "auth.uid != null && resource.data.userId == auth.uid", 
     "create": "auth.uid != null && request.data.userId == auth.uid"
   }
   
   // accountTypes æƒé™è®¾ç½®
   {
     "read": "auth.uid != null && resource.data.userId == auth.uid",
     "write": "auth.uid != null && resource.data.userId == auth.uid",
     "create": "auth.uid != null && request.data.userId == auth.uid"
   }
   ```

3. **åˆ›å»ºæ•°æ®åº“ç´¢å¼•**
   ```javascript
   // monthlyRecords ç´¢å¼•
   - { "userId": 1, "year": -1, "month": -1 }  // ç”¨æˆ·å’Œæ—¥æœŸç´¢å¼•
   - { "userId": 1, "id": 1 }  // ç”¨æˆ·å’Œè®°å½•IDç´¢å¼•
   
   // accountTypes ç´¢å¼•  
   - { "userId": 1 }  // ç”¨æˆ·ç´¢å¼•
   ```

### 3. ä¸Šä¼ é™æ€æ–‡ä»¶

å°†ä»¥ä¸‹æ–‡ä»¶ä¸Šä¼ åˆ°äº‘å¼€å‘é™æ€ç½‘ç«™æ‰˜ç®¡ï¼š

```
wechat-cloudbase-version/
â”œâ”€â”€ index.html          â† ä¸»é¡µé¢æ–‡ä»¶
â”œâ”€â”€ script.js           â† æ ¸å¿ƒé€»è¾‘ï¼ˆå«äº‘å¼€å‘é›†æˆï¼‰
â”œâ”€â”€ style.css           â† æ ·å¼æ–‡ä»¶
â”œâ”€â”€ test-data.js        â† æµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ project.config.json â† é¡¹ç›®é…ç½®
```

### 4. é…ç½®é¡¹ç›®

1. **ä¿®æ”¹ç¯å¢ƒID**
   åœ¨ `script.js` ä¸­ç¡®è®¤ç¯å¢ƒIDï¼š
   ```javascript
   this.cloudbase = cloudbase.init({
       env: 'cloud1-3g8s3xvm7609c639' // ä½ çš„äº‘å¼€å‘ç¯å¢ƒID
   });
   ```

2. **é…ç½®åŸŸå**
   - åœ¨å°ç¨‹åºåå°é…ç½®ä¸šåŠ¡åŸŸå
   - å°†é™æ€ç½‘ç«™åŸŸåæ·»åŠ åˆ°å¯ä¿¡åŸŸååˆ—è¡¨

### 5. æµ‹è¯•éƒ¨ç½²

1. **è®¿é—®ç½‘ç«™**
   - ä½¿ç”¨äº‘å¼€å‘æä¾›çš„é»˜è®¤åŸŸåè®¿é—®
   - æµ‹è¯•é¡µé¢æ˜¯å¦æ­£å¸¸åŠ è½½

2. **æµ‹è¯•ç™»å½•åŠŸèƒ½**
   - ç‚¹å‡»"ğŸ” ç™»å½•"æŒ‰é’®
   - ç¡®è®¤å¾®ä¿¡ç™»å½•æµç¨‹æ­£å¸¸

3. **æµ‹è¯•æ•°æ®åŒæ­¥**
   - æ·»åŠ ä¸€æ¡è®°è´¦è®°å½•
   - æŸ¥çœ‹äº‘æ•°æ®åº“æ˜¯å¦æˆåŠŸå­˜å‚¨

## ğŸ”§ é…ç½®è¯¦æƒ…

### ç¯å¢ƒå˜é‡
```javascript
// äº‘å¼€å‘ç¯å¢ƒID
const ENV_ID = 'cloud1-3g8s3xvm7609c639'

// æ•°æ®åº“é›†åˆå
const COLLECTIONS = {
    MONTHLY_RECORDS: 'monthlyRecords',
    ACCOUNT_TYPES: 'accountTypes'
}
```

### æ•°æ®ç»“æ„

#### monthlyRecords é›†åˆ
```json
{
  "_id": "auto_generated",
  "id": "2024-08",
  "userId": "user_openid", 
  "year": 2024,
  "month": 8,
  "recordDate": "2024-08-31",
  "balances": {
    "xiaoxiao": {
      "cmbc": 15000.50,
      "wechat": 1500.80
    },
    "yunyun": {
      "cmbc": 22000.00,
      "wechat": 800.30  
    }
  },
  "totals": {
    "xiaoxiao": 16501.30,
    "yunyun": 22800.30,
    "combined": 39301.60
  },
  "changes": {
    "xiaoxiao": 1500.30,
    "yunyun": 2800.30, 
    "combined": 4300.60
  },
  "createdAt": "2024-08-31T10:00:00Z",
  "updatedAt": "2024-08-31T10:00:00Z"
}
```

#### accountTypes é›†åˆ
```json
{
  "_id": "auto_generated",
  "userId": "user_openid",
  "types": [
    {
      "id": "cmbc",
      "name": "æ‹›å•†é“¶è¡Œ", 
      "icon": "ğŸ¦",
      "color": "#d32f2f",
      "category": "bank"
    }
  ],
  "createdAt": "2024-08-31T10:00:00Z",
  "updatedAt": "2024-08-31T10:00:00Z"
}
```

## ğŸ›¡ï¸ å®‰å…¨é…ç½®

### æ•°æ®åº“å®‰å…¨è§„åˆ™
```javascript
// ç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
{
  "read": "auth.uid != null && resource.data.userId == auth.uid",
  "write": "auth.uid != null && (
    resource == null || resource.data.userId == auth.uid
  ) && request.data.userId == auth.uid"
}
```

### ç™»å½•å®‰å…¨
- ä½¿ç”¨å¾®ä¿¡å®˜æ–¹ç™»å½•API
- ç”¨æˆ·èº«ä»½éªŒè¯é€šè¿‡openidè¯†åˆ«
- æ•°æ®éš”ç¦»ï¼šæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®

## ğŸ“± ä½¿ç”¨æµç¨‹

### é¦–æ¬¡ä½¿ç”¨
1. è®¿é—®ç½‘ç«™
2. ç‚¹å‡»"ğŸ” ç™»å½•"è¿›è¡Œå¾®ä¿¡ç™»å½•
3. å¼€å§‹è®°è´¦ï¼Œæ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°äº‘ç«¯

### å¤šè®¾å¤‡åŒæ­¥
1. åœ¨æ–°è®¾å¤‡ä¸Šè®¿é—®ç½‘ç«™
2. ä½¿ç”¨ç›¸åŒå¾®ä¿¡è´¦å·ç™»å½•
3. æ•°æ®è‡ªåŠ¨ä»äº‘ç«¯åŠ è½½

### æ•°æ®å¤‡ä»½
- **è‡ªåŠ¨å¤‡ä»½**ï¼šæ¯æ¬¡ä¿å­˜è‡ªåŠ¨åŒæ­¥åˆ°äº‘ç«¯
- **æ‰‹åŠ¨å¤‡ä»½**ï¼šå¯å¯¼å‡ºJSONæ–‡ä»¶
- **æœ¬åœ°ç¼“å­˜**ï¼šç¦»çº¿æ—¶ä½¿ç”¨æœ¬åœ°æ•°æ®

## ğŸ” è°ƒè¯•å’Œç›‘æ§

### å¼€å‘è°ƒè¯•
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹
console.log('å½“å‰ç”¨æˆ·:', tracker.currentUser);
console.log('æ•°æ®åº“è¿æ¥:', tracker.db);
console.log('æœ¬åœ°æ•°æ®:', tracker.data);
```

### ç›‘æ§æŒ‡æ ‡
- ç”¨æˆ·ç™»å½•æˆåŠŸç‡
- æ•°æ®åŒæ­¥æˆåŠŸç‡  
- æ•°æ®åº“è¯»å†™æ€§èƒ½
- é”™è¯¯æ—¥å¿—è®°å½•

## ğŸ’° æˆæœ¬ä¼°ç®—

### äº‘å¼€å‘èµ„æºæ¶ˆè€—
- **æ•°æ®åº“è¯»å†™**ï¼šæ¯æœˆçº¦100-500æ¬¡æ“ä½œ
- **å­˜å‚¨ç©ºé—´**ï¼šæ¯ç”¨æˆ·çº¦1-5MBæ•°æ®
- **CDNæµé‡**ï¼šæ¯æ¬¡è®¿é—®çº¦500KB-1MB

### å…è´¹é¢åº¦
- æ•°æ®åº“ï¼š5ä¸‡æ¬¡è¯»å†™/æœˆ
- å­˜å‚¨ï¼š2GB/æœˆ
- CDNï¼š5GB/æœˆ

**é¢„è®¡æˆæœ¬**ï¼šåœ¨å…è´¹é¢åº¦èŒƒå›´å†… âœ…

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ç™»å½•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥åŸŸåé…ç½®å’Œç¯å¢ƒIDæ˜¯å¦æ­£ç¡®

### Q: æ•°æ®åŒæ­¥å¤±è´¥ï¼Ÿ
A: æŸ¥çœ‹ç½‘ç»œè¿æ¥å’Œæ•°æ®åº“æƒé™è®¾ç½®

### Q: å¦‚ä½•è¿ç§»æœ¬åœ°æ•°æ®ï¼Ÿ
A: ä½¿ç”¨å¯¼å‡º/å¯¼å…¥åŠŸèƒ½ï¼Œæˆ–è”ç³»å¼€å‘è€…ååŠ©è¿ç§»

---

ğŸ‰ éƒ¨ç½²å®Œæˆåï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„äº‘ç«¯èµ„äº§ç®¡ç†ç³»ç»Ÿï¼